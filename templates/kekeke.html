<!DOCTYPE html>
<html>
<head>
    <title>웹캠 스트리밍 및 이미지 캡처</title>
    <style>
        .video-container {
            display: inline-block;
            margin-right: 20px;
        }
    </style>
</head>
<body>
    <div class="video-container">
        <h2>실시간 웹캠 스트리밍</h2>
        <video id="videoElement" autoplay></video>
    </div>

    <div class="video-container">
        <h2>캡처된 이미지</h2>
        <img id="capturedImage" src="" alt="캡처된 이미지">
    </div>

    <script>
        // 웹캠 스트리밍을 비디오 요소에 표시하는 JavaScript 코드
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => {
                const videoElement = document.getElementById('videoElement');
                videoElement.srcObject = stream;
            })
            .catch(error => {
                console.error('Error accessing webcam:', error);
            });

        // 1초마다 이미지 캡처를 요청하는 JavaScript 코드
        setInterval(captureImage, 1000);

        // 이미지 캡처 요청을 서버로 전송하는 함수
        function captureImage() {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', '/capture', true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                    const capturedImage = document.getElementById('capturedImage');
                    capturedImage.src = xhr.responseText;
                }
            };
            xhr.send();
        }
    </script>
</body>
</html>
